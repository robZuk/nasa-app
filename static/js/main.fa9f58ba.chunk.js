(this["webpackJsonpnasa-app"]=this["webpackJsonpnasa-app"]||[]).push([[0],{106:function(e,t,a){e.exports=a(143)},111:function(e,t,a){},143:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(28),o=a.n(c),s=(a(111),a(8)),l=a(86),i=a.n(l);var u=function(){return r.a.createElement("div",null,r.a.createElement("svg",{className:"spinner",viewBox:"0 0 50 50"},r.a.createElement("circle",{className:"path",cx:"25",cy:"25",r:"20",fill:"none",strokeWidth:"5"})))},m=a(87),p=a.n(m),f=a(93),d="Sea and Lake Ice",g="Severe Storms",v="./icons/iceberg2.png",E="./icons/storm3.png",b=function(e){var t=e.cluster,a=e.setLocationInfo,n=e.className,c=new Date,o=function(e){var t=e.src,o=e.alt,s=e.cluster;return r.a.createElement("button",{className:"marker".concat(n),onClick:function(){return a({id:s.properties.evId,title:s.properties.title,date:c.toISOString(s.properties.date).slice(0,10)})}},r.a.createElement("img",{src:t,alt:o}))};return r.a.createElement(r.a.Fragment,null,"Wildfires"===t.properties.category&&r.a.createElement(o,{src:"./icons/fire4.png",alt:"Wildfires",cluster:t}),"Volcanoes"===t.properties.category&&r.a.createElement(o,{src:"./icons/volcano3.png",alt:"Volcanoes",cluster:t}),t.properties.category===g&&r.a.createElement(o,{src:E,alt:g,cluster:t}),t.properties.category===d&&r.a.createElement(o,{src:v,alt:d,cluster:t}))},h=function(e){var t=e.cluster,a=e.superclusters,n=e.lat,c=e.lng,o=e.pointCount,s=e.type,l=e.mapRef,i=e.closeLocationInfo,u=function(e){var s=e.className;return r.a.createElement("div",{className:s,onClick:function(){var e=Math.min(a.getClusterExpansionZoom(t.id),20);l.current.setZoom(e),l.current.panTo({lat:n,lng:c}),i()}},o)};return r.a.createElement(r.a.Fragment,null,"Wildfires"===s&&r.a.createElement(u,{className:"cluster-marker cluster-marker-wildfires"}),"Volcanoes"===s&&r.a.createElement(u,{className:"cluster-marker cluster-marker-volcanoes"}),s===d&&r.a.createElement(u,{className:"cluster-marker cluster-marker-ices"}),s===g&&r.a.createElement(u,{className:"cluster-marker cluster-marker-storms"}))},j=function(e){var t=e.info,a=e.closeLocationInfo;return r.a.createElement("div",{className:"location-info"},r.a.createElement("h2",null,"Event Location Info"),r.a.createElement("ul",null,r.a.createElement("li",null,"ID: ",r.a.createElement("strong",null,t.id)),r.a.createElement("li",null,"TITLE: ",r.a.createElement("strong",null,t.title)),r.a.createElement("li",null,"DATE: ",r.a.createElement("strong",null,t.date))),r.a.createElement("div",{className:"close-button",onClick:a}))},O=a(5),y=a(63),k=function(e){var t=e.src,a=e.alt,c=e.setEventsType,o=e.event,l=Object(n.useState)(!0),i=Object(s.a)(l,2),u=i[0],m=i[1];return r.a.createElement("button",{className:"marker map-header-icon".concat(!u&&"-active"),onClick:function(){!function(e,t){e((function(e){return Object(y.a)(Object(y.a)({},e),{},Object(O.a)({},t,!e[t]))}))}(c,o),m((function(e){return!e}))}},r.a.createElement("img",{src:t,alt:a,className:"map-header-img"}))},S=function(e){var t=e.setEventsType;return r.a.createElement("div",{className:"map-header"},r.a.createElement(k,{src:"./icons/fire4.png",alt:"Wildfires",setEventsType:t,event:"wildfires"}),r.a.createElement(k,{src:"./icons/volcano3.png",alt:"Volcanoes",setEventsType:t,event:"volcanoes"}),r.a.createElement(k,{src:v,alt:d,setEventsType:t,event:"ices"}),r.a.createElement(k,{src:E,alt:g,setEventsType:t,event:"storms"}))},w=(a(82),a(64)),I=a.n(w),N=a(15),x=a(89),C=r.a.createContext(null),L=function(e){var t=e.children,a=Object(n.useRef)(),c=Object(n.useState)([]),o=Object(s.a)(c,2),l=o[0],i=o[1],u=Object(n.useState)([]),m=Object(s.a)(u,2),p=m[0],f=m[1],v=Object(n.useState)([]),E=Object(s.a)(v,2),b=E[0],h=E[1],j=Object(n.useState)([]),O=Object(s.a)(j,2),y=O[0],k=O[1],S=Object(n.useState)(null),w=Object(s.a)(S,2),L=w[0],T=w[1],D=Object(n.useState)(!1),W=Object(s.a)(D,2),V=W[0],R=W[1],P=Object(n.useState)(!1),A=Object(s.a)(P,2),F=(A[0],A[1]);Object(n.useEffect)((function(){(function(){var e=Object(x.a)(I.a.mark((function e(){var t,a,n,r,c,o,s;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),F(!1),e.prev=2,e.next=5,fetch("https://eonet.sci.gsfc.nasa.gov/api/v2.1/events");case 5:return t=e.sent,e.next=8,t.json();case 8:a=e.sent,n=a.events,f(n),r=n.filter((function(e){return"Wildfires"===e.categories[0].title})),c=n.filter((function(e){return"Volcanoes"===e.categories[0].title})),o=n.filter((function(e){return e.categories[0].title===d})),s=n.filter((function(e){return e.categories[0].title===g})),i([Object(N.a)(r),Object(N.a)(c),Object(N.a)(o),Object(N.a)(s)]),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),F(e.t0);case 21:R(!1);case 22:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var Z={mapRef:a,eventsData:l,setEventsData:i,data:p,setData:f,searchedData:b,setSearchedData:h,searchedEventPosition:y,setSearchedEventPosition:k,locationInfo:L,setLocationInfo:T,storeLoading:[V,R]};return r.a.createElement(C.Provider,{value:Z},t)};function T(){var e=Object(n.useContext)(C),t=e.searchedEventPosition,a=e.eventsData,c=e.mapRef,o=e.locationInfo,l=e.setLocationInfo,i=Object(s.a)(a,4),u=i[0],m=i[1],v=i[2],E=i[3],O=Object(n.useState)(null),y=Object(s.a)(O,2),k=y[0],w=y[1],I=Object(n.useState)(10),N=Object(s.a)(I,2),x=N[0],L=N[1],T=Object(n.useState)({wildfires:!0,volcanoes:!0,ices:!0,storms:!0}),D=Object(s.a)(T,2),W=D[0],V=D[1];function R(e){return void 0!==e&&e.map((function(e){return{type:"Feature",properties:{cluster:!1,evId:e.id,category:e.categories[0].title,title:e.title,date:e.geometries[e.geometries.length-1].date},geometry:{type:"Point",coordinates:[parseFloat(e.geometries[e.geometries.length-1].coordinates[0]),parseFloat(e.geometries[e.geometries.length-1].coordinates[1])]}}}))}var P=R(u),A=R(m),F=R(v),Z=R(E);function z(e){var t=Object(f.a)({points:e,bounds:k,zoom:x,options:{radius:75,maxZoom:20}});return{clusters:t.clusters,supercluster:t.supercluster}}var B=z(P),M=z(A),G=z(F),J=z(Z),U=function(){l(null)},K=function(e,a,n){return e.map((function(e){var o=Object(s.a)(e.geometry.coordinates,2),i=o[0],u=o[1],m=e.properties,p=m.cluster,f=m.point_count,d=t[0]===e.geometry.coordinates[0]&&t[1]===e.geometry.coordinates[1]?"-searched":"";return p?r.a.createElement(h,{key:e.id,cluster:e,superclusters:a,lng:i,lat:u,pointCount:f,type:n,mapRef:c,closeLocationInfo:U}):r.a.createElement(b,{key:e.properties.evId,cluster:e,lat:u,lng:i,setLocationInfo:l,searchedEventPosition:t,className:d})}))};return r.a.createElement("div",{className:"map"},r.a.createElement(r.a.Fragment,null,r.a.createElement(S,{setEventsType:V}),r.a.createElement(p.a,{bootstrapURLKeys:{key:"AIzaSyAhdUBl7lw3saMhrAiMydG4aywVJfRaCxo"},defaultCenter:{lat:52.6376,lng:-1.135171},defaultZoom:4,yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(e){var t=e.map;c.current=t},onChange:function(e){var t=e.zoom,a=e.bounds;L(t),w([a.nw.lng,a.se.lat,a.se.lng,a.nw.lat])}},W.wildfires&&K(B.clusters,B.supercluster,"Wildfires"),W.volcanoes&&K(M.clusters,M.supercluster,"Volcanoes"),W.ices&&K(G.clusters,G.supercluster,d),W.storms&&K(J.clusters,J.supercluster,g)),o&&r.a.createElement(j,{info:o,closeLocationInfo:U})))}var D=a(200),W=a(199),V=a(198),R=a(201),P=a(195),A=a(202),F=a(203),Z=a(192),z=a(67),B=a.n(z),M=a(197),G=a(206),J=a(207),U=a(90);function K(){var e=Object(n.useContext)(C),t=e.searchedData,a=e.setSearchedData,c=e.data,o=e.setSearchedEventPosition,l=e.mapRef,i=(e.setLocationInfo,Object(n.useState)([])),u=Object(s.a)(i,2),m=u[0],p=u[1],f=Object(n.useState)(!1),b=Object(s.a)(f,2),h=b[0],j=b[1],O=function(e){return function(t){("keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&j(e)}};return r.a.createElement("div",null,r.a.createElement(r.a.Fragment,null,r.a.createElement(V.a,{onClick:O(!0)},r.a.createElement(B.a,{fontSize:"medium",sx:{m:1,color:U.a[500]}})),r.a.createElement(W.a,{open:h,onClose:O(!1)},r.a.createElement(D.a,{component:"form",sx:{"& > :not(style)":{m:1,width:"37ch"}},noValidate:!0,autoComplete:"off",onSubmit:function(e){!function(e){var t=new RegExp("".concat(e),"ig");a(Object(N.a)(c.filter((function(e){return t.test(e.title)}))))}(m),p(""),e.preventDefault()}},r.a.createElement(Z.a,{id:"standard-basic",label:"Search ...",variant:"standard",InputProps:{type:"search",endAdornment:r.a.createElement(G.a,{position:"end"},r.a.createElement(J.a,{edge:"end",type:"submit"},r.a.createElement(B.a,null)))},value:m,onChange:function(e){p(e.target.value)}})),r.a.createElement(D.a,{sx:{width:300},role:"presentation",onClick:O(!1),onKeyDown:O(!1)},r.a.createElement(R.a,null,t.map((function(e){return r.a.createElement(P.a,{button:!0,key:e.id,onClick:function(){return O(!1),l.current.panTo({lat:e.geometries[e.geometries.length-1].coordinates[1],lng:e.geometries[e.geometries.length-1].coordinates[0]}),l.current.setZoom(9),a([]),o(Object(N.a)(e.geometries[e.geometries.length-1].coordinates))}},r.a.createElement(A.a,null,"Wildfires"===e.categories[0].title&&r.a.createElement(M.a,{sx:{bgcolor:U.a[300]}},r.a.createElement("img",{src:"./icons/fire4.png",alt:"Wildfires",className:"event-list-img"})),"Volcanoes"===e.categories[0].title&&r.a.createElement(M.a,{sx:{bgcolor:U.a[300]}},r.a.createElement("img",{src:"./icons/volcano3.png",alt:"Volcanoes",className:"event-list-img"})),e.categories[0].title===d&&r.a.createElement(M.a,{sx:{bgcolor:U.a[300]}},r.a.createElement("img",{src:v,alt:d,className:"event-list-img"})),e.categories[0].title===g&&r.a.createElement(M.a,{sx:{bgcolor:U.a[300]}},r.a.createElement("img",{src:E,alt:g,className:"event-list-img"}))),r.a.createElement(F.a,{primary:e.title}))})))))))}function $(){var e=Object(n.useContext)(C).storeLoading,t=Object(s.a)(e,1)[0];return r.a.createElement("div",{className:"app"},t?r.a.createElement(u,null):r.a.createElement("div",{className:"grid"},r.a.createElement(K,null),r.a.createElement(T,null)))}i.a.config();Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(L,null,r.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},82:function(e,t,a){}},[[106,1,2]]]);
//# sourceMappingURL=main.fa9f58ba.chunk.js.map